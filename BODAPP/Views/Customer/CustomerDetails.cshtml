@model BODDal.Models.CustomerDetails
@{
    ViewBag.Title = "CustomerDetails";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

@{
    var random = new Random();
    var list = new List<string> { "success", "danger", "warning", "info", "primary", "secondary" };
    var x = random.Next(list.Count);

}
@{

    var Enterpriseuser = Session["EnterpriseUserDataModel"] as BODDal.Models.UserModel;
    var user = Session["UserDataModel"] as BODDal.Models.UserModel;
    var SmmeUser = Session["SMMEUserDataModel"] as BODDal.Models.UserModel;
    var EnterpriseEmpuser = Session["EnterpriseEMPUserDataModel"] as BODDal.Models.UserModel;
    var AdminUser = Session["AdminUserDataModel"] as BODDal.Models.UserModel;

    var LinkJs = "";
    if (Enterpriseuser != null)
    {
        LinkJs = Enterpriseuser.ChildMenuJsLink;
    }
    else if (SmmeUser != null)
    {
        LinkJs = SmmeUser.ChildMenuJsLink;
    }
    else if (EnterpriseEmpuser != null)
    {
        LinkJs = EnterpriseEmpuser.ChildMenuJsLink;
    }
    else if (AdminUser != null)
    {
        LinkJs = AdminUser.ChildMenuJsLink;
    }
    else
    {
        LinkJs = user.ChildMenuJsLink;
    }
}


<link rel="stylesheet" href="~/Content/assets/vendor/css/pages/page-profile.css" />
<div class="container-xxl flex-grow-1 container-p-y">
    <input type="hidden" value="@ViewBag.EntrId" id="hdnEnrId"/>

    <h4 class="py-3 mb-4">
        <span class="text-muted fw-light">Customer Profile /</span> Profile
    </h4>


    <!-- Header -->
    <div class="row">
        <div class="col-12">
            <div class="card mb-4">
                <div class="user-profile-header-banner">
                    <img src="~/Content/assets/img/pages/profile-banner.png" alt="Banner image" class="rounded-top">
                </div>
                <div class="user-profile-header d-flex flex-column flex-sm-row text-sm-start text-center mb-4">
                  
                    @if (Model.CD_ProfilePic == "NO")
                    {
                        <div class="avatar avatar-xl d-block h-auto ms-0 ms-sm-4 rounded user-profile-img">
                            <span class="avatar-initial  bg-@list[x]">@Model.CD_Prefix</span>
                        </div>
                        <br />
                    }
                    else
                    {
                        <img class="d-block h-auto img-fluid ms-0 ms-sm-4 rounded user-profile-img object-fit-cover" style="max-height:120px" src="@Model.CD_ProfilePic" height="100" width="100" alt="User avatar">
                    }
                    
                    <div class="flex-grow-1 mt-3 mt-sm-5">
                        <div class="d-flex align-items-md-end align-items-sm-start align-items-center justify-content-md-between justify-content-start mx-4 flex-md-row flex-column gap-4">
                            <div class="user-profile-info">
                                <h4><span id="spnHeadName"></span></h4>
                                <ul class="list-inline mb-0 d-flex align-items-center flex-wrap justify-content-sm-start justify-content-center gap-2">
                                    <li class="list-inline-item d-flex gap-1">
                                        <i class='ti ti ti-mail'></i> <span id="spnMail"></span>
                                    </li>
                                    <li class="list-inline-item d-flex gap-1">
                                        <i class='ti ti-map-pin'></i> <span id="spnCity"></span>
                                    </li>
                                    <li class="list-inline-item d-flex gap-1">
                                        <i class='ti ti-calendar'></i>Joined  <span id="spnDate"></span>
                                    </li>
                                </ul>
                            </div>
                            <a href="javascript:void(0)" class="btn btn-primary">
                                <i class='ti-xs ti ti-user-check me-1'></i>Customer
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--/ Header -->
    <!-- Navbar pills -->
    @*<div class="row">
        <div class="col-md-12">
            <ul class="nav nav-pills flex-column flex-sm-row mb-4">
                <li class="nav-item"><a class="nav-link active" href="javascript:void(0);"><i class='ti-xs ti ti-user-check me-1'></i> Customer</a></li>
                <li class="nav-item"><a class="nav-link" href="~/Enterprise/EnterpriseProfieView_Branches"><i class='ti-xs ti ti-building me-1'></i> Branch</a></li>
                <li class="nav-item"><a class="nav-link" href="~/Enterprise/EnterpriseProfieView_Projects"><i class='ti-xs ti ti-layout-grid me-1'></i> Projects</a></li>
                <li class="nav-item"><a class="nav-link" href="~/Enterprise/EnterpriseProfieView_SMME"><i class='ti-xs ti ti-link me-1'></i> MSME</a></li>
            </ul>
        </div>
    </div>*@
    <!--/ Navbar pills -->
    <!-- User Profile Content -->
    <div class="row">
        <div class="col-xl-4 col-lg-5 col-md-5">
            <!-- About User -->
            <div class="card mb-4">
                <div class="card-body">
                    <small class="card-text text-uppercase">About</small>
                    <ul class="list-unstyled mb-4 mt-3">
                        <li class="d-flex align-items-center mb-3"><i class="ti ti-user text-heading"></i><span class="fw-medium mx-2 text-heading">Full Name:</span> <span id="spnName"></span></li>
                        <li class="d-flex align-items-center mb-3"><i class="ti ti-check text-heading"></i><span class="fw-medium mx-2 text-heading">Type:</span> <span id="spnType"></span></li>

                        <li class="d-flex align-items-center mb-3"><i class="ti ti-flag text-heading"></i><span class="fw-medium mx-2 text-heading">Country:</span> <span id="spnCountry">South Africa</span></li>
                        <li class="d-flex align-items-center mb-3"><i class="ti ti-file-description text-heading"></i><span class="fw-medium mx-2 text-heading">Languages:</span> <span id="spnLanguage">English</span></li>
                    </ul>
                    <small class="card-text text-uppercase">Contacts</small>
                    <ul class="list-unstyled mb-4 mt-3">
                        <li class="d-flex align-items-center mb-3"><i class="ti ti-phone-call"></i><span class="fw-medium mx-2 text-heading">Contact:</span> <span id="spnContactNo"></span></li>
                        <li class="d-flex align-items-center mb-3"><i class="ti ti-mail"></i><span class="fw-medium mx-2 text-heading">Email:</span> <span id="spnEmail"></span></li>
                    </ul>
                    <small class="card-text text-uppercase">Teams</small>
                    <ul class="list-unstyled mb-0 mt-3">
                        <li class="d-flex align-items-center mb-3">
                            <i class="ti ti-list-details text-danger me-2"></i>
                            <div class="d-flex flex-wrap"><span class="fw-medium me-2 text-heading">Jobs : </span><span id="spnJob"></span></div>
                        </li>
                        <li class="d-flex align-items-center">
                            <i class="ti ti-category text-info me-2"></i>
                            <div class="d-flex flex-wrap"><span class="fw-medium me-2 text-heading">Sector :</span><span id="spnSector"></span></div>
                        </li>
                    </ul>
                </div>
            </div>
           
            <!--/ Profile Overview -->
        </div>
        <div class="col-lg-8 mb-4 mb-lg-0">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between">
                    <h5 class="card-title m-0 me-2">Job Details</h5>
                    <div class="dropdown">
                        <button class="btn p-0" type="button" id="teamMemberList" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="ti ti-dots-vertical ti-sm text-muted"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="teamMemberList" style="">
                            @if(ViewBag.JobType=="Enterprise")
                            {
                                 <a class="dropdown-item" href="/Job/ViewAllJobsForEnterprise?CustId=@Model.CD_Id">ViewAll</a>
                            }
                            else if (ViewBag.JobType == "Admin")
                            {
                                <a class="dropdown-item" href="/Job/ViewAllJobsForAdmin?CustId=@Model.CD_Id">ViewAll</a>
                            }

                            else if (ViewBag.JobType == "SMME")
                            {
                                <a class="dropdown-item" href="/Job/ViewAllJobsForSMME?CustId=@Model.CD_Id">ViewAll</a>
                            }

                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-borderless border-top" id="tblJob">
                        <thead class="border-bottom">
                            <tr>
                                <th>MSME</th>
                                <th>JOB</th>
                                <th>STATUS</th>
                                <th>BUDGET</th>
                            </tr>
                        </thead>
                        <tbody >
                            @*<tr>
                                <td>
                                    <div class="d-flex justify-content-start align-items-center">
                                        <div class="me-3">
                                            <div class="avatar me-2">
                                                <img src="../../assets/img/avatars/3.png" alt="Avatar" class="rounded-circle">
                                            </div>
                                        </div>
                                        <div class="d-flex flex-column">
                                            <p class="mb-0 fw-medium">*4230</p><small class="text-muted">Credit</small>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="d-flex flex-column">
                                        <p class="mb-0 fw-medium">Sent</p>
                                        <small class="text-muted text-nowrap">17 Mar 2022</small>
                                    </div>
                                </td>
                                <td><span class="badge bg-label-success">Verified</span></td>
                                <td>
                                    <p class="mb-0 fw-medium">+$1,678</p>
                                </td>
                            </tr>*@
                          
                           
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--/ User Profile Content -->

</div>
<script src="~/Content/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
<script src="~/Content/assets/js/pages-profile.js"></script>
<script src="@LinkJs"></script>
<script src="~/Scripts/custom/CustomerDetails.js"></script>

