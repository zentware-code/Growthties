@{
    Layout = null;
}

<!doctype html>
<html lang="en"
      class=" layout-wide  customizer-hide"
      dir="ltr"
      data-skin="default"
      data-assets-path="~/Content/assets/"
      data-template="vertical-menu-template"
      data-bs-theme="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>MSME Login</title>

    <!-- Favicon -->
    @*<link rel="icon" type="image/x-icon" href="~/Content/assets/img/favicon/favicon.ico" />*@
    <link rel="icon" type="image/x-icon" href="~/Content/assets/img/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&ampdisplay=swap" rel="stylesheet" />

    <link rel="stylesheet" href="~/Content/assets/vendor/fonts/iconify-icons.css" />

    <!-- Core CSS -->
    <!-- build:css assets/vendor/css/theme.css  -->

    <link rel="stylesheet" href="~/Content/assets/vendor/libs/node-waves/node-waves.css" />
    <link href="~/Content/assets/vendor/libs/sweetalert2/sweetalert2.css" rel="stylesheet" />


    <link rel="stylesheet" href="~/Content/assets/vendor/libs/pickr/pickr-themes.css" />
    <link href="~/Content/assets/vendor/css/rtl/core.css" rel="stylesheet" />



    <link rel="stylesheet" href="~/Content/assets/css/demo.css" />


    <!-- Vendors CSS -->

    <link rel="stylesheet" href="~/Content/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />



    <!-- Page CSS -->
    <!-- Page -->
    <link rel="stylesheet" href="~/Content/assets/vendor/css/pages/page-auth.css" />

    <!-- Helpers -->
    <script src="~/Content/assets/vendor/js/helpers.js"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->

    <script src="~/Content/assets/vendor/js/template-customizer.js"></script>

    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->

    <script src="~/Content/assets/js/config.js"></script>

    @*<style>
        .set-bg-image {
            background-image: url('../../Upload/index_img_msme.jpg');
            background-image: url("../Content/assets/img/illustrations/images-07-min.jpg");
            background-size: 100vw auto;
            background-position: center top;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
    </style>*@
    <style>
        #loadingModal {
            transition: opacity 0.3s ease;
        }
    </style>

</head>

<body class="set-bg-image">
    <div id="loadingModal" style="display: none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255,255,255,0.8); text-align: center;">
        <div style="position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%);">
            <div class="spinner-border text-primary" role="status">
                <span class="sr-only"></span>
            </div>
            <div>Please wait, sending email...</div>
        </div>
    </div>

    <input type="hidden" id="hdnEmailVery" value="@ViewBag.EmailVery" />
    <input type="hidden" id="hdnUserFirstName" value="@ViewBag.UserFirstName" />
    <input type="hidden" id="hdnEmail" value="@ViewBag.Email" />
    <input type="hidden" id="hdnLoginId" value="@ViewBag.LoginId" />
    <input type="hidden" id="hdnPassword" value="@ViewBag.Password" />

    <div class="container-xxl">
        <div class="authentication-wrapper authentication-basic container-p-y">
            <div class="authentication-inner py-6">
                <!-- Login -->
                <div class="card">
                    <div class="card-body">
                        <!-- Logo -->
                        <div class="app-brand justify-content-center">
                            <div class="app-brand p-0 mb-1">
                                <a href="#" class="app-brand-link gap-2">
                                    <img style="width:150px;margin:auto;display:block;" src="~/Content/assets/img/ESD_LOGO_DARK.png" />
                                </a>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h5 class="text-center">MSME Portal</h5>
                        </div>
                        <!-- /Logo -->
                        <form id="formAuthentication" class="mb-4" method="post">
                            <div class="mb-6 form-control-validation">
                                @*<label for="email" class="form-label">Email or Username</label>*@
                                <input type="text" class="form-control" id="txtUid" name="txtUid" placeholder="Email Address / Phone Number" autofocus>
                                @*<input type="text" class="form-control" id="email" name="email-username" placeholder="Enter your email or username" autofocus />*@
                            </div>
                            <div class="mb-6 form-password-toggle form-control-validation">
                                @*<label class="form-label" for="password">Password</label>*@
                                <div class="input-group input-group-merge">
                                    <input type="password" id="txtPwd" class="form-control" name="txtPwd" placeholder="Password" aria-describedby="password" />
                                    @*<input type="password" id="password" class="form-control" name="password" placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;" aria-describedby="password" />*@
                                    <span class="input-group-text cursor-pointer"><i class="icon-base ti tabler-eye-off"></i></span>
                                </div>
                            </div>
                        
                            <div class="mb-6 bg-info rounded">
                                <button id="btnSignIn" class="btn btn-infod-grid w-100 waves-effect waves-light text-white" onclick="getValue(100)">Login</button>
                            </div>
                            <div class="divider my-6">
                                <div class="divider-text">or</div>
                            </div>
                            <div class="my-8 mb-4">
                                <div class="d-flex justify-content-center">
                                    <a href="/Account/ChangePassword">
                                        <p class="mb-0">Forgot Password?</p>
                                    </a>
                                </div>
                            </div>

                            <p class="text-center">
                                <span>Don't have an account?</span>
                                <a href="/Account/MSMERegistration">
                                    <span class="text-info">Sign Up</span>
                                </a>
                            </p>

                            <input type="hidden" id="hdnMessage" value="@ViewBag.Message" />

                        </form>

                    </div>
                </div>
                <!-- /Login -->
            </div>
        </div>
    </div>


    <!-- Core JS -->
    <!-- build:js assets/vendor/js/theme.js -->


    <script src="~/Content/assets/vendor/libs/jquery/jquery.js"></script>

    <script src="~/Content/assets/vendor/libs/popper/popper.js"></script>
    <script src="~/Content/assets/vendor/js/bootstrap.js"></script>
    <script src="~/Content/assets/vendor/libs/node-waves/node-waves.js"></script>



    <script src="~/Content/assets/vendor/libs/algolia/autocomplete-js.js"></script>

    <script src="~/Content/assets/vendor/libs/pickr/pickr.js"></script>



    <script src="~/Content/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>


    <script src="~/Content/assets/vendor/libs/hammer/hammer.js"></script>

    <script src="~/Content/assets/vendor/libs/i18n/i18n.js"></script>


    <script src="~/Content/assets/vendor/js/menu.js"></script>

    <!-- endbuild -->
    <!-- Vendors JS -->
    <script src="~/Content/assets/vendor/libs/form-validation/popular.js"></script>
    <script src="~/Content/assets/vendor/libs/form-validation/bootstrap5.js"></script>
    <script src="~/Content/assets/vendor/libs/form-validation/auto-focus.js"></script>


    <!-- build:js assets/vendor/js/core.js -->
    <script src="~/Content/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="~/Content/assets/vendor/libs/sweetalert2/sweetalert2.js"></script>

    <script src="~/Content/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="~/Content/assets/vendor/libs/sweetalert2/sweetalert2.js"></script>
    <script>
        var message = $('#hdnEmailVery').val();
        if (message != "") {
            Swal.fire({
                title: "Your mail is not verified",
                //text: 'Please verify your email using the link we sent. Click Resend if you need the email to be sent again.',
                html: 'Please verify your email using the link we sent. <a href="javascript:void(0);" onclick="SendMail()">Click Resend</a> if you need the email to be sent again.',
                icon: "warning",
                customClass: { confirmButton: "btn btn-primary waves-effect waves-light" },
                buttonsStyling: !1
            });
            //$('#hdnEmailVery').val('');
        } else {
            var hdnmessage = $('#hdnMessage').val();
            if (hdnmessage != "") {
                Swal.fire({
                    title: "Oops...",
                    text: hdnmessage,
                    icon: "error",
                    customClass: { confirmButton: "btn btn-primary waves-effect waves-light" },
                    buttonsStyling: !1
                });
                $('#hdnMessage').val('');
            }
        }


        $(document).ready(function () {
            localStorage.removeItem('menuId');

            // Determine the correct background image
            //var bgImage = "../Content/assets/img/illustrations/images-07-min.jpg";
            var bgImage = "../Content/assets/img/illustrations/index_img_msme.jpg";
            if (window.location.pathname === "/CocaCola/MSMELogin") {
                bgImage = "../Content/assets/img/illustrations/index_img_msme.jpg";
            } else if (window.location.pathname === "/Microsoft/MSMELogin") {
                bgImage = "../Upload/index_img_msme_microsoft.jpg";
            }

            // Create a new <style> element
            var styleElement = $('<style></style>');

            // Create CSS rule as a line-by-line array (clean, readable, and safe)
            var cssRules = [
              '.set-bg-image {',
              '  background-image: url("' + bgImage + '");',
              '  background-size: 100vw auto;',
              '  background-position: center top;',
              '  background-repeat: no-repeat;',
              '  background-attachment: fixed;',
              '}'
            ];

            // Join rules and add them to the <style> tag
            styleElement.text(cssRules.join('\n'));

            // Append to <head>
            $('head').append(styleElement);
       
        })

        function SendMail() {
            $('#loadingModal').fadeIn(); // Show loading modal

            var action = 'smmeregistration';

            var _data = JSON.stringify({
                emailcontent: {
                    UserName: $('#hdnUserFirstName').val(),
                    EnrCompany: $('#txtCompanyName').val(),
                    Email: $('#hdnEmail').val(),
                    UM_Login: $('#hdnEmail').val(),
                    Password: $('#hdnPassword').val(),
                },
                Action: action
            });

            $.ajax({
                type: "POST",
                url: "/ScriptJson/GetEmailExistsByTemplate",
                data: _data,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#loadingModal').fadeOut(); // Hide loading modal

                    if (data != null && data.IsSuccess === true) {
                        Swal.fire({
                            title: "Email sent successfully",
                            text: "Your verification email has been sent again. Kindly check your email to complete the process!",
                            icon: "success",
                            customClass: { confirmButton: "btn btn-primary waves-effect waves-light" },
                            buttonsStyling: !1
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.href = '/Account/SMMELogin';
                            }
                        });
                    }
                },
                error: function () {
                    $('#loadingModal').fadeOut(); // Hide loading modal on error

                    Swal.fire({
                        title: "Oops..",
                        text: "Process not complete",
                        icon: "error",
                        customClass: { confirmButton: "btn btn-primary waves-effect waves-light" },
                        buttonsStyling: false
                    });
                }
            });
        }

    </script>
    <script src="~/Content/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="~/Content/assets/vendor/libs/popper/popper.js"></script>
    <script src="~/Content/assets/vendor/js/bootstrap.js"></script>


    <!-- Main JS -->

    <script src="~/Content/assets/js/main.js"></script>


    <!-- Page JS -->
    <script src="~/Content/assets/js/pages-auth.js"></script>

</body>
</html>

<!-- beautify ignore:end -->
